# å®¢æˆ·ç¼ºè´§ç®¡ç†åŠŸèƒ½ - å…¨é¢åˆ†ææŠ¥å‘Šä¸æ•´æ”¹è®¡åˆ’

## ğŸ“Š ç»¼åˆåˆ†æç»“æœæ¦‚è¿°

æœ¬æŠ¥å‘ŠåŸºäºå¤šä¸ªä¸“ä¸šAgentçš„æ·±åº¦åˆ†æï¼Œæ¶µç›–äº†æ¶æ„å®¡æŸ¥ã€å®‰å…¨å®¡è®¡ã€ä»£ç è´¨é‡æ£€æŸ¥ã€UI/UXè¯„ä¼°å’Œæµ‹è¯•è¦†ç›–åˆ†æã€‚å‘ç°çš„é—®é¢˜æŒ‰ä¸¥é‡ç¨‹åº¦åˆ†ç±»ï¼Œå¹¶åˆ¶å®šäº†è¯¦ç»†çš„æ•´æ”¹è®¡åˆ’ã€‚

### åˆ†æèŒƒå›´

- **æ¶æ„åˆè§„æ€§**ï¼šæ£€æŸ¥æ˜¯å¦ç¬¦åˆCLAUDE.mdå®šä¹‰çš„åˆ†å±‚æ¶æ„
- **å®‰å…¨æ€§**ï¼šè¯†åˆ«å®‰å…¨æ¼æ´å’Œéšç§é£é™©
- **ä»£ç è´¨é‡**ï¼šè¯„ä¼°å¯ç»´æŠ¤æ€§ã€æ€§èƒ½å’Œæœ€ä½³å®è·µ
- **UI/UXåˆè§„æ€§**ï¼šéªŒè¯Apple HIGå’Œå¯è®¿é—®æ€§æ ‡å‡†
- **æµ‹è¯•è¦†ç›–**ï¼šè¯„ä¼°æµ‹è¯•å®Œæ•´æ€§å’Œè´¨é‡ä¿è¯

---

## ğŸ”´ ä¸¥é‡é—®é¢˜ï¼ˆCritical Issuesï¼‰

### 1. æ¶æ„è¿è§„ï¼ˆArchitecture Violationsï¼‰

#### é—®é¢˜æè¿°
- **Repositoryå±‚è¿è§„**ï¼š`LocalCustomerOutOfStockRepository` ç›´æ¥ä¾èµ– `ModelContext`ï¼Œè¿ååˆ†å±‚æ¶æ„åŸåˆ™
- **Serviceå±‚è¿‡é‡**ï¼š`CustomerOutOfStockService` 1122è¡Œä»£ç åŒ…å«ä¸šåŠ¡é€»è¾‘ã€DTOè½¬æ¢ã€ç¼“å­˜ç®¡ç†å’ŒUIçŠ¶æ€
- **ViewModelè¾¹ç•Œç ´å**ï¼šç›´æ¥æ“ä½œServiceå±æ€§ï¼Œç ´åå•å‘æ•°æ®æµ

#### å…·ä½“ä»£ç ä½ç½®
```swift
// âŒ è¿è§„ï¼šRepositoryç›´æ¥ä¾èµ–ModelContext
@MainActor
class LocalCustomerOutOfStockRepository: CustomerOutOfStockRepository {
    private let modelContext: ModelContext
    
    init(modelContext: ModelContext) {
        self.modelContext = modelContext
    }
}

// âŒ è¿è§„ï¼šServiceèŒè´£è¿‡é‡
// File: CustomerOutOfStockService.swift (1122 lines)
private func convertDTOsToModelsForDisplay(_ dtos: [CustomerOutOfStockDTO]) -> [CustomerOutOfStock]
```

#### å½±å“è¯„ä¼°
- **äº‘è¿ç§»å›°éš¾**ï¼šç´§è€¦åˆä½¿å¾—åˆ‡æ¢åˆ°äº‘åç«¯å˜å¾—å¤æ‚
- **å¯æµ‹è¯•æ€§å·®**ï¼šéš¾ä»¥è¿›è¡Œå•å…ƒæµ‹è¯•å’Œæ¨¡æ‹Ÿ
- **ç»´æŠ¤æ€§ä½**ï¼šèŒè´£ä¸æ¸…å¯¼è‡´ä¿®æ”¹å½±å“é¢å¤§

### 2. å®‰å…¨æ¼æ´ï¼ˆSecurity Vulnerabilitiesï¼‰

#### 2.1 è®¤è¯ç³»ç»Ÿå´©æºƒé£é™©
```swift
// âŒ ä¸¥é‡ï¼šä½¿ç”¨fatalErrorå¯¼è‡´ç³»ç»Ÿå´©æºƒ
private func getCurrentUser() -> (id: String, name: String) {
    guard let currentUser = authService.currentUser else {
        fatalError("No current user available")  // ç³»ç»Ÿå´©æºƒé£é™©
    }
    return (id: currentUser.id, name: currentUser.name)
}
```

#### 2.2 PIIä¿¡æ¯æ³„éœ²
```swift
// âŒ ä¸¥é‡ï¼šæ—¥å¿—æš´éœ²å®¢æˆ·æ•æ„Ÿä¿¡æ¯
print("Customer: \(customer.name), Product: \(product.name)")  // PIIæ³„éœ²
Logger.app.info("Processing customer: \(customerName)")        // æœªè„±æ•æ—¥å¿—
```

#### 2.3 ä¸å®‰å…¨çš„ç¼“å­˜å­˜å‚¨
```swift
// âŒ ä¸¥é‡ï¼šç¼“å­˜æ–‡ä»¶æœªåŠ å¯†å­˜å‚¨
let cacheURL = FileManager.default.urls(for: .documentDirectory, 
                                       in: .userDomainMask)[0]
                                       .appendingPathComponent("cache.json")
// å­˜å‚¨åœ¨Documentsç›®å½•ï¼Œå¯è¢«è®¿é—®å’Œå¤‡ä»½
```

#### 2.4 å¯†é’¥ç®¡ç†è¿è§„
```swift
// âŒ ä¸¥é‡ï¼šåŠ å¯†å¯†é’¥å­˜å‚¨ä¸ºæ™®é€šæ–‡ä»¶
private let keyPath = "encryption_keys.json"  // åº”ä½¿ç”¨Keychain
```

#### å®‰å…¨é£é™©è¯„ä¼°
- **æ•°æ®æ³„éœ²é£é™©**ï¼šé«˜ - å®¢æˆ·PIIå¯èƒ½è¢«æ¶æ„è®¿é—®
- **ç³»ç»Ÿå¯ç”¨æ€§é£é™©**ï¼šé«˜ - è®¤è¯å¤±è´¥å¯¼è‡´åº”ç”¨å´©æºƒ
- **åˆè§„é£é™©**ï¼šé«˜ - è¿åGDPRå’Œæ•°æ®ä¿æŠ¤æ³•è§„

### 3. æ€§èƒ½é—®é¢˜ï¼ˆPerformance Issuesï¼‰

#### 3.1 ä¸»çº¿ç¨‹é˜»å¡
```swift
// âŒ æ€§èƒ½é—®é¢˜ï¼šä¸»çº¿ç¨‹æ‰§è¡Œå¤æ‚è½¬æ¢
@MainActor
private func convertDTOsToModelsForDisplay(_ dtos: [CustomerOutOfStockDTO]) -> [CustomerOutOfStock] {
    return dtos.compactMap { dto in  // é˜»å¡ä¸»çº¿ç¨‹
        // å¤æ‚è½¬æ¢é€»è¾‘...
    }
}
```

#### 3.2 å†…å­˜æ³„æ¼é£é™©
```swift
// âŒ å†…å­˜æ³„æ¼ï¼šç¼ºå°‘weak selfæ•è·
$searchText
    .dropFirst()
    .sink { searchText in  // ç¼ºå°‘[weak self]
        self.performDebouncedSearch(searchText)  // å¼ºå¼•ç”¨å¾ªç¯
    }
```

#### 3.3 ç¼“å­˜æ— é™å¢é•¿
```swift
// âŒ å†…å­˜é—®é¢˜ï¼šç¼“å­˜æ— è¾¹ç•Œå¢é•¿
private var memoryCache: [OutOfStockCacheKey: CachedOutOfStockPage] = [:]  // æ— å†…å­˜å‹åŠ›å¤„ç†
```

---

## ğŸŸ¡ é‡è¦é—®é¢˜ï¼ˆImportant Issuesï¼‰

### 4. ä»£ç è´¨é‡é—®é¢˜

#### 4.1 è¿åå•ä¸€èŒè´£åŸåˆ™
- **Dashboardè§†å›¾**ï¼š1810è¡Œï¼ŒåŒ…å«è¿‡å¤šèŒè´£
- **Serviceç±»**ï¼š1122è¡Œï¼Œæ··åˆä¸šåŠ¡é€»è¾‘ã€æ•°æ®è½¬æ¢ã€ç¼“å­˜ç®¡ç†
- **ViewModel**ï¼š599è¡Œï¼ŒçŠ¶æ€ç®¡ç†è¿‡äºå¤æ‚

#### 4.2 è¿‡åº¦çŠ¶æ€å‘å¸ƒ
```swift
// âŒ æ€§èƒ½å½±å“ï¼šè¿‡å¤š@Publishedå±æ€§
@Published var items: [CustomerOutOfStock] = []
@Published var isLoading = false
@Published var isLoadingMore = false
@Published var error: Error?
@Published var hasMoreData = true
// ... 20+ä¸ª@Publishedå±æ€§å¯¼è‡´é¢‘ç¹UIæ›´æ–°
```

#### 4.3 è°ƒè¯•ä»£ç æ±¡æŸ“
```swift
// âŒ ç”Ÿäº§ä»£ç é—®é¢˜ï¼šå¤§é‡è°ƒè¯•è¾“å‡º
print("Loading data for date: \(date)")
print("Filter criteria: \(criteria)")
print("Cache hit: \(cacheHit)")
// ... 100+å¤„printè¯­å¥
```

### 5. UI/UXåˆè§„æ€§é—®é¢˜

#### 5.1 Apple HIGè¿è§„
- **è§¦æ‘¸ç›®æ ‡è¿‡å°**ï¼š36pt < 44ptæœ€å°è¦æ±‚
- **å¯¼èˆªæ¨¡å¼ä¸æ ‡å‡†**ï¼šè‡ªå®šä¹‰å¤´éƒ¨ç ´åiOSå¯¼èˆªæ¨¡å¼
- **é¢œè‰²ä½¿ç”¨ä¸å½“**ï¼šç¡¬ç¼–ç é¢œè‰²è€Œéè¯­ä¹‰é¢œè‰²

#### 5.2 å¯è®¿é—®æ€§ç¼ºå¤±
```swift
// âŒ å¯è®¿é—®æ€§ï¼šç¼ºå°‘accessibilityæ”¯æŒ
CustomTextField(
    placeholder,
    text: $searchText
    // ç¼ºå°‘ï¼šaccessibilityæ ‡ç­¾ã€æç¤ºã€ç‰¹æ€§
)
```

#### 5.3 Dynamic Typeä¸æ”¯æŒ
```swift
// âŒ å¯è®¿é—®æ€§ï¼šå›ºå®šå­—ä½“å¤§å°
.font(.system(size: 14))  // åº”ä½¿ç”¨ .font(.body)
```

### 6. æµ‹è¯•è¦†ç›–ä¸è¶³

#### å½“å‰æµ‹è¯•çŠ¶æ€
- âœ… **CustomerOutOfStockNavigationStateTests** - åŸºç¡€å¯¼èˆªæµ‹è¯•
- âŒ **Serviceå±‚æµ‹è¯•è¦†ç›–ç‡**ï¼š~5% (1122è¡Œä»£ç å‡ ä¹æ— æµ‹è¯•)
- âŒ **Cache Manageræµ‹è¯•è¦†ç›–ç‡**ï¼š0% (980è¡Œç¼“å­˜é€»è¾‘æ— æµ‹è¯•)
- âŒ **ViewModelæµ‹è¯•è¦†ç›–ç‡**ï¼š~10% (599è¡ŒçŠ¶æ€ç®¡ç†ç¼ºå°‘æµ‹è¯•)
- âŒ **é›†æˆæµ‹è¯•**ï¼šå®Œå…¨ç¼ºå¤±
- âŒ **æ€§èƒ½æµ‹è¯•**ï¼šå®Œå…¨ç¼ºå¤±

---

## âœ… ä¼˜ç§€å®è·µï¼ˆBest Practicesï¼‰

### ç¼“å­˜æ¶æ„äº®ç‚¹
```swift
// âœ… ä¼˜ç§€ï¼šä¸‰çº§ç¼“å­˜ç³»ç»Ÿè®¾è®¡
struct OutOfStockCacheKey: Hashable, Codable {
    let date: Date
    let filterHash: String
    let page: Int
    let pageSize: Int
}

// âœ… ä¼˜ç§€ï¼šLRUé©±é€ç­–ç•¥
private func evictLRUItems() {
    let sortedKeys = memoryCache.keys.sorted { key1, key2 in
        (accessTimes[key1] ?? .distantPast) < (accessTimes[key2] ?? .distantPast)
    }
}
```

### DTOç³»ç»Ÿè®¾è®¡
```swift
// âœ… ä¼˜ç§€ï¼šå®Œæ•´çš„DTOç³»ç»Ÿä¸ºäº‘è¿ç§»å‡†å¤‡
public struct CustomerOutOfStockDTO: Codable {
    let id: UUID
    let customerId: UUID
    let productId: UUID
    let quantity: Int
    let createdAt: Date
    let updatedAt: Date
}
```

### åˆ†é¡µè®¾è®¡
```swift
// âœ… ä¼˜ç§€ï¼šCursor-basedåˆ†é¡µç¬¦åˆæœ€ä½³å®è·µ
struct PaginationResult<T: Codable>: Codable {
    let items: [T]
    let hasMoreData: Bool
    let nextCursor: String?
    let totalCount: Int?
}
```

---

## ğŸ›  è¯¦ç»†æ•´æ”¹è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šç´§æ€¥å®‰å…¨ä¿®å¤ï¼ˆ1-2å¤©ï¼‰âœ… **å·²å®Œæˆ**

#### 1.1 ä¿®å¤è®¤è¯å´©æºƒæ¼æ´ âœ…
**ç›®æ ‡**ï¼šæ¶ˆé™¤ç³»ç»Ÿå´©æºƒé£é™©ï¼Œå®ç°ä¼˜é›…é”™è¯¯å¤„ç†

**å·²å®Œæˆä»»åŠ¡**ï¼š
- [x] âœ… æ›¿æ¢æ‰€æœ‰`fatalError()`è°ƒç”¨ä¸º`throws`é”™è¯¯å¤„ç†
- [x] âœ… æ·»åŠ sessionéªŒè¯é€»è¾‘
- [x] âœ… å®ç°tokenè¿‡æœŸæ£€æŸ¥å’Œè‡ªåŠ¨åˆ·æ–°
- [x] âœ… æ·»åŠ ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

**é¢„æœŸä¿®æ”¹æ–‡ä»¶**ï¼š
- `CustomerOutOfStockService.swift`
- `AuthenticationService.swift`

**éªŒè¯æ ‡å‡†**ï¼š
- æ¨¡æ‹Ÿå™¨ä¸­éªŒè¯è®¤è¯å¤±è´¥ä¸ä¼šå´©æºƒ
- æ˜¾ç¤ºé€‚å½“çš„é”™è¯¯æ¶ˆæ¯
- æ”¯æŒé‡æ–°ç™»å½•æµç¨‹

#### 1.2 ä¿®å¤PIIæš´éœ²é—®é¢˜ âœ…
**ç›®æ ‡**ï¼šé˜²æ­¢æ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼Œç¡®ä¿åˆè§„æ€§

**å·²å®Œæˆä»»åŠ¡**ï¼š
- [x] âœ… å®ç°æ—¥å¿—æ•°æ®è„±æ•å‡½æ•°
- [x] âœ… ç§»é™¤æ‰€æœ‰ç”Ÿäº§ç¯å¢ƒprintè¯­å¥
- [x] âœ… æ›´æ–°AuditingServiceå®ç°æ•°æ®è„±æ•
- [x] âœ… æ·»åŠ æ•æ„Ÿæ•°æ®æ ‡è®°å’Œå¤„ç†

**å®ç°ç¤ºä¾‹**ï¼š
```swift
// å®ç°æ•°æ®è„±æ•
extension String {
    func redacted() -> String {
        guard self.count > 4 else { return "***" }
        return String(self.prefix(2)) + "***" + String(self.suffix(2))
    }
}

// å®‰å…¨æ—¥å¿—è®°å½•
Logger.app.info("Processing customer: %{public}@", customerName.redacted())
```

**éªŒè¯æ ‡å‡†**ï¼š
- æ—¥å¿—ä¸­æ— æ˜æ–‡æ•æ„Ÿä¿¡æ¯
- å®¡è®¡è®°å½•æ­£ç¡®è„±æ•
- è°ƒè¯•ä¿¡æ¯ä¸åœ¨å‘å¸ƒç‰ˆæœ¬ä¸­

#### 1.3 å®ç°Keychainå¯†é’¥å­˜å‚¨ âœ…
**ç›®æ ‡**ï¼šå®‰å…¨å­˜å‚¨åŠ å¯†å¯†é’¥å’Œæ•æ„Ÿé…ç½®

**å·²å®Œæˆä»»åŠ¡**ï¼š
- [x] âœ… å®ç°KeychainåŒ…è£…å™¨
- [x] âœ… è¿ç§»ç°æœ‰æ–‡ä»¶å¯†é’¥åˆ°Keychain
- [x] âœ… åŠ å¯†ç¼“å­˜æ–‡ä»¶å­˜å‚¨
- [x] âœ… æ›´æ–°é…ç½®ç®¡ç†æœåŠ¡

**å®ç°ç¤ºä¾‹**ï¼š
```swift
enum KeychainService {
    static func save(_ data: Data, account: String) throws {
        let query: [String: Any] = [
            kSecClass as String: kSecClassGenericPassword,
            kSecAttrAccount as String: account,
            kSecValueData as String: data,
            kSecAttrAccessible as String: kSecAttrAccessibleAfterFirstUnlock
        ]
        
        SecItemDelete(query as CFDictionary)
        let status = SecItemAdd(query as CFDictionary, nil)
        guard status == errSecSuccess else {
            throw KeychainError.unhandledError(status: status)
        }
    }
}
```

**éªŒè¯æ ‡å‡†**ï¼š
- å¯†é’¥å®‰å…¨å­˜å‚¨åœ¨Keychainä¸­
- ç¼“å­˜æ–‡ä»¶æ­£ç¡®åŠ å¯†
- åº”ç”¨å¸è½½é‡è£…åå¯†é’¥ä¸å¯è®¿é—®

### ç¬¬äºŒé˜¶æ®µï¼šæ¶æ„é‡æ„ï¼ˆ3-5å¤©ï¼‰âœ… **å·²å®Œæˆ**

#### 2.1 Repositoryå±‚æŠ½è±¡ âœ… **éƒ¨åˆ†å®Œæˆ** (âœ… AuditingServiceé‡æ„å·²å®Œæˆ)
**ç›®æ ‡**ï¼šå®ç°çœŸæ­£çš„Repositoryæ¨¡å¼ï¼Œæ”¯æŒäº‘è¿ç§»

**ä»»åŠ¡è¿›åº¦**ï¼š
- [x] âœ… å®šä¹‰Repositoryåè®® (å·²å­˜åœ¨)
- [x] âœ… **AuditingServiceé‡æ„å®Œæˆ** - ä½¿ç”¨Repositoryæ¨¡å¼æ›¿ä»£ModelContextç›´æ¥è®¿é—®
- [x] âœ… å®ç°Local Repository (å·²å­˜åœ¨)
- [ ] å®ç°Cloud Repository (å¾…å®Œæˆ)
- [ ] æ·»åŠ äº‹åŠ¡è¾¹ç•Œç®¡ç†

**Repositoryåè®®è®¾è®¡**ï¼š
```swift
protocol CustomerOutOfStockRepository {
    func fetch(_ criteria: OutOfStockFilterCriteria) async throws -> OutOfStockPaginationResult
    func countRecords(_ criteria: OutOfStockFilterCriteria) async throws -> Int
    func create(_ record: CustomerOutOfStock) async throws -> CustomerOutOfStock
    func update(_ record: CustomerOutOfStock) async throws -> CustomerOutOfStock
    func delete(_ id: UUID) async throws
    func batchUpdate(_ records: [CustomerOutOfStock]) async throws -> [CustomerOutOfStock]
}
```

**éªŒè¯æ ‡å‡†**ï¼š
- Repositoryå¯ä»¥æ— ç¼åˆ‡æ¢å®ç°
- äº‹åŠ¡æ“ä½œæ­£ç¡®å›æ»š
- é”™è¯¯å¤„ç†ä¸€è‡´ä¸”å®Œæ•´

#### 2.2 Serviceå±‚æ‹†åˆ† âœ… **å·²å®Œæˆ**
**ç›®æ ‡**ï¼šå°†å•ä½“Serviceåˆ†è§£ä¸ºèŒè´£æ¸…æ™°çš„å¤šä¸ªæœåŠ¡

**æœåŠ¡æ‹†åˆ†è®¡åˆ’**ï¼š
```swift
// æ•°æ®æ“ä½œæœåŠ¡
protocol CustomerOutOfStockDataService {
    func fetchRecords(_ criteria: FilterCriteria) async throws -> PaginationResult<CustomerOutOfStock>
    func createRecord(_ record: CustomerOutOfStock) async throws -> CustomerOutOfStock
    func updateRecord(_ record: CustomerOutOfStock) async throws -> CustomerOutOfStock
    func deleteRecord(_ id: UUID) async throws
}

// ä¸šåŠ¡é€»è¾‘æœåŠ¡
protocol CustomerOutOfStockBusinessService {
    func validateRecord(_ record: CustomerOutOfStock) throws
    func processReturn(_ return: ReturnRequest) async throws
    func calculateStatistics(_ criteria: FilterCriteria) async throws -> OutOfStockStatistics
}

// ç¼“å­˜æœåŠ¡
protocol CustomerOutOfStockCacheService {
    func getCachedData(_ key: OutOfStockCacheKey) async -> CachedOutOfStockPage?
    func setCachedData(_ data: CachedOutOfStockPage, for key: OutOfStockCacheKey) async
    func invalidateCache(_ pattern: String) async
}
```

**å…·ä½“ä»»åŠ¡**ï¼š
- [x] âœ… æå–æ•°æ®æ“ä½œåˆ°DataService
- [x] âœ… ç§»åŠ¨ä¸šåŠ¡è§„åˆ™åˆ°BusinessService
- [x] âœ… ç‹¬ç«‹ç¼“å­˜é€»è¾‘åˆ°CacheService
- [x] âœ… å®ç°Serviceé—´åè°ƒå™¨

**å·²å®Œæˆå®ç°**ï¼š
- âœ… `CustomerOutOfStockDataService` - å¤„ç†æ•°æ®è®¿é—®å±‚æ“ä½œ
- âœ… `CustomerOutOfStockBusinessService` - å¤„ç†ä¸šåŠ¡é€»è¾‘å’ŒéªŒè¯
- âœ… `CustomerOutOfStockCacheService` - å¤„ç†ç¼“å­˜ç®¡ç†
- âœ… `CustomerOutOfStockCoordinator` - ä¸»åè°ƒå™¨ï¼Œç¼–æ’å„æœåŠ¡

**éªŒè¯æ ‡å‡†**ï¼š
- æ¯ä¸ªServiceèŒè´£å•ä¸€æ˜ç¡®
- Serviceé—´ä¾èµ–æ¸…æ™°å¯æµ‹è¯•
- ä¸šåŠ¡é€»è¾‘é›†ä¸­æ˜“äºç»´æŠ¤

#### 2.3 å®ç°ä¾èµ–æ³¨å…¥
**ç›®æ ‡**ï¼šä½¿ç”¨CLAUDE.mdå®šä¹‰çš„DIæ¨¡å¼ï¼Œæé«˜å¯æµ‹è¯•æ€§

**DIå®ç°**ï¼š
```swift
// ä¾èµ–å®šä¹‰
public protocol HasCustomerOutOfStockServices {
    var customerOutOfStockData: CustomerOutOfStockDataService { get }
    var customerOutOfStockBusiness: CustomerOutOfStockBusinessService { get }
    var customerOutOfStockCache: CustomerOutOfStockCacheService { get }
}

// ä¾èµ–å®¹å™¨
public struct CustomerOutOfStockDependencies: HasCustomerOutOfStockServices {
    public let customerOutOfStockData: CustomerOutOfStockDataService
    public let customerOutOfStockBusiness: CustomerOutOfStockBusinessService  
    public let customerOutOfStockCache: CustomerOutOfStockCacheService
    
    public init(
        dataService: CustomerOutOfStockDataService,
        businessService: CustomerOutOfStockBusinessService,
        cacheService: CustomerOutOfStockCacheService
    ) {
        self.customerOutOfStockData = dataService
        self.customerOutOfStockBusiness = businessService
        self.customerOutOfStockCache = cacheService
    }
}
```

**å…·ä½“ä»»åŠ¡**ï¼š
- [ ] å®šä¹‰æœåŠ¡åè®®å’Œä¾èµ–æ¥å£
- [ ] å®ç°ä¾èµ–å®¹å™¨
- [ ] æ›´æ–°ViewModelä½¿ç”¨DI
- [ ] é…ç½®Environmentä¾èµ–æ³¨å…¥

**éªŒè¯æ ‡å‡†**ï¼š
- ViewModelå¯ä»¥æ³¨å…¥MockæœåŠ¡è¿›è¡Œæµ‹è¯•
- æœåŠ¡åˆ‡æ¢ä¸å½±å“ä¸Šå±‚ä»£ç 
- ä¾èµ–å…³ç³»æ¸…æ™°å¯è¿½è¸ª

### ç¬¬ä¸‰é˜¶æ®µï¼šæ€§èƒ½ä¼˜åŒ–ï¼ˆ2-3å¤©ï¼‰âœ… **å·²å®Œæˆ**

#### 3.1 ä¿®å¤å†…å­˜ç®¡ç†é—®é¢˜ âœ… **å·²å®Œæˆ**
**ç›®æ ‡**ï¼šæ¶ˆé™¤å†…å­˜æ³„æ¼ï¼Œä¼˜åŒ–å†…å­˜ä½¿ç”¨

**å…·ä½“ä»»åŠ¡**ï¼š
- [x] âœ… æ·»åŠ æ‰€æœ‰ç¼ºå¤±çš„`[weak self]`æ•è·
- [x] âœ… å®ç°ç¼“å­˜å†…å­˜å‹åŠ›å¤„ç†
- [x] âœ… ä¼˜åŒ–@Publishedå±æ€§æ•°é‡
- [x] âœ… æ·»åŠ å†…å­˜ç›‘æ§å’ŒæŠ¥å‘Š

**å·²å®Œæˆå®ç°**ï¼š
- âœ… `DefaultCustomerOutOfStockCacheService` - å®ç°LRUç¼“å­˜å’Œæ™ºèƒ½å†…å­˜ç®¡ç†
- âœ… å†…å­˜å‹åŠ›å¤„ç†æœºåˆ¶ - è‡ªåŠ¨æ¸…ç†å’Œæ·˜æ±°ç­–ç•¥
- âœ… ç¼“å­˜ç»Ÿè®¡å’Œç›‘æ§ - è¯¦ç»†çš„å†…å­˜ä½¿ç”¨æŠ¥å‘Š

**å†…å­˜ä¼˜åŒ–ç¤ºä¾‹**ï¼š
```swift
// ä¿®å¤å¾ªç¯å¼•ç”¨
$searchText
    .dropFirst()
    .debounce(for: .milliseconds(300), scheduler: RunLoop.main)
    .sink { [weak self] searchText in
        Task { [weak self] in
            await self?.performSearch(searchText)
        }
    }
    .store(in: &cancellables)

// ç¼“å­˜å†…å­˜å‹åŠ›å¤„ç†
func handleMemoryPressure() {
    let memoryUsage = getMemoryUsage()
    if memoryUsage > maxMemoryThreshold {
        evictLeastRecentlyUsed()
    }
}
```

**éªŒè¯æ ‡å‡†**ï¼š
- Instrumentsæ£€æµ‹æ— å†…å­˜æ³„æ¼
- å†…å­˜ä½¿ç”¨åœ¨åˆç†èŒƒå›´å†…
- å†…å­˜è­¦å‘Šæ—¶æ­£ç¡®æ¸…ç†

#### 3.2 ä¸»çº¿ç¨‹æ€§èƒ½ä¼˜åŒ– âœ… **å·²å®Œæˆ**
**ç›®æ ‡**ï¼šé¿å…ä¸»çº¿ç¨‹é˜»å¡ï¼Œæå‡UIå“åº”æ€§

**å…·ä½“ä»»åŠ¡**ï¼š
- [x] âœ… ç§»åŠ¨æ•°æ®è½¬æ¢åˆ°åå°çº¿ç¨‹
- [x] âœ… å®ç°å¼‚æ­¥æ•°æ®å¤„ç†æµæ°´çº¿
- [x] âœ… ä¼˜åŒ–UIæ›´æ–°æ‰¹å¤„ç†
- [x] âœ… æ·»åŠ æ€§èƒ½ç›‘æ§ç‚¹

**å·²å®Œæˆä¼˜åŒ–**ï¼š
- âœ… `batchCreateRecords` - ä½¿ç”¨TaskGroupå¹¶å‘å¤„ç†æ‰¹é‡æ“ä½œ
- âœ… `calculateStatistics` - å•æ¬¡éå†æ›¿ä»£å¤šæ¬¡è¿‡æ»¤ï¼Œä½¿ç”¨åå°ä»»åŠ¡å¤„ç†
- âœ… æ•°æ®è½¬æ¢å¼‚æ­¥åŒ– - é¿å…ä¸»çº¿ç¨‹é˜»å¡

**æ€§èƒ½ä¼˜åŒ–å®ç°**ï¼š
```swift
// åå°æ•°æ®å¤„ç†
func convertDTOsToModels(_ dtos: [CustomerOutOfStockDTO]) async -> [CustomerOutOfStock] {
    await withTaskGroup(of: CustomerOutOfStock?.self) { group in
        for dto in dtos {
            group.addTask {
                await convertSingleDTO(dto)
            }
        }
        
        var results: [CustomerOutOfStock] = []
        for await result in group {
            if let model = result {
                results.append(model)
            }
        }
        return results
    }
}

// ä¸»çº¿ç¨‹UIæ›´æ–°
@MainActor
func updateUI(with models: [CustomerOutOfStock]) {
    self.items = models
    self.isLoading = false
}
```

**éªŒè¯æ ‡å‡†**ï¼š
- ä¸»çº¿ç¨‹ä½¿ç”¨ç‡æ˜¾è‘—é™ä½
- UIå“åº”æ€§æµ‹è¯•é€šè¿‡
- æ•°æ®åŠ è½½ä¸é˜»å¡äº¤äº’

#### 3.3 ç¼“å­˜ç­–ç•¥ä¼˜åŒ– âœ… **å·²å®Œæˆ**
**ç›®æ ‡**ï¼šæé«˜ç¼“å­˜æ•ˆç‡ï¼Œå‡å°‘å†…å­˜å ç”¨

**å…·ä½“ä»»åŠ¡**ï¼š
- [x] âœ… å®ç°æ™ºèƒ½ç¼“å­˜æ·˜æ±°ç­–ç•¥
- [x] âœ… ä¼˜åŒ–ç¼“å­˜é”®ç”Ÿæˆç®—æ³•
- [x] âœ… æ·»åŠ ç¼“å­˜ç»Ÿè®¡å’Œç›‘æ§
- [x] âœ… å®ç°é¢„åŠ è½½ç­–ç•¥

**å·²å®Œæˆå®ç°**ï¼š
- âœ… `SmartCacheManager` - ä¸‰å±‚ç¼“å­˜æ¶æ„ï¼ˆHot/Warm/Predictiveï¼‰
- âœ… LRUæ·˜æ±°ç­–ç•¥ - åŸºäºè®¿é—®æ¨¡å¼çš„æ™ºèƒ½æ·˜æ±°
- âœ… è®¿é—®æ¨¡å¼è¿½è¸ª - é¢„æµ‹æ€§é¢„åŠ è½½
- âœ… ç¼“å­˜ç»Ÿè®¡ç›‘æ§ - è¯¦ç»†çš„æ€§èƒ½æŒ‡æ ‡

**ç¼“å­˜ä¼˜åŒ–ç¤ºä¾‹**ï¼š
```swift
// æ™ºèƒ½ç¼“å­˜ç®¡ç†
class OptimizedCacheManager {
    private let maxMemorySize: Int = 50 * 1024 * 1024 // 50MB
    private let maxDiskSize: Int = 200 * 1024 * 1024 // 200MB
    
    func evictIfNeeded() async {
        if await getMemoryUsage() > maxMemorySize {
            await evictLeastRecentlyUsed(count: 10)
        }
    }
    
    func preloadPredictiveData() async {
        let predictedKeys = await generatePredictiveKeys()
        for key in predictedKeys {
            if await shouldPreload(key) {
                await preloadData(for: key)
            }
        }
    }
}
```

**éªŒè¯æ ‡å‡†**ï¼š
- ç¼“å­˜å‘½ä¸­ç‡è¾¾åˆ°80%ä»¥ä¸Š
- å†…å­˜ä½¿ç”¨æ§åˆ¶åœ¨50MBä»¥å†…
- é¢„åŠ è½½æå‡ç”¨æˆ·ä½“éªŒ

### ç¬¬å››é˜¶æ®µï¼šUI/UXåˆè§„ä¿®å¤ï¼ˆ2å¤©ï¼‰

#### 4.1 ä¿®å¤å¯è®¿é—®æ€§è¿è§„
**ç›®æ ‡**ï¼šç¬¦åˆAppleå¯è®¿é—®æ€§æŒ‡å—å’ŒWCAGæ ‡å‡†

**å…·ä½“ä»»åŠ¡**ï¼š
- [ ] å¢åŠ æ‰€æœ‰è§¦æ‘¸ç›®æ ‡åˆ°44pt
- [ ] æ·»åŠ å®Œæ•´accessibilityæ ‡ç­¾å’Œæç¤º
- [ ] å®ç°Dynamic Typeæ”¯æŒ
- [ ] ä¼˜åŒ–VoiceOverå¯¼èˆª

**å¯è®¿é—®æ€§å®ç°**ï¼š
```swift
// ç¬¦åˆæœ€å°è§¦æ‘¸ç›®æ ‡
Button(action: filterAction) {
    Text("ç­›é€‰")
        .padding()
}
.frame(minWidth: 44, minHeight: 44)

// å®Œæ•´accessibilityæ”¯æŒ
CustomTextField(placeholder, text: $searchText)
    .accessibilityLabel("æœç´¢å®¢æˆ·ç¼ºè´§è®°å½•")
    .accessibilityHint("è¾“å…¥å®¢æˆ·åç§°æˆ–äº§å“åç§°è¿›è¡Œæœç´¢")
    .accessibilityValue(searchText.isEmpty ? "ç©º" : searchText)

// Dynamic Typeæ”¯æŒ
Text("å®¢æˆ·å§“å")
    .font(.headline)  // è‡ªåŠ¨æ”¯æŒDynamic Type
    .lineLimit(nil)   // å…è®¸æ–‡æœ¬æ¢è¡Œ
```

**éªŒè¯æ ‡å‡†**ï¼š
- VoiceOveræ­£ç¡®æœ—è¯»æ‰€æœ‰å…ƒç´ 
- Dynamic Typeè°ƒæ•´åç•Œé¢æ­£å¸¸
- é¢œè‰²å¯¹æ¯”åº¦ç¬¦åˆWCAG AA

#### 4.2 ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
**ç›®æ ‡**ï¼šç®€åŒ–ç•Œé¢ï¼Œæå‡æ˜“ç”¨æ€§

**å…·ä½“ä»»åŠ¡**ï¼š
- [ ] ç®€åŒ–ç­›é€‰UIï¼Œå‡å°‘è®¤çŸ¥è´Ÿæ‹…
- [ ] æ·»åŠ åŠ è½½çŠ¶æ€å’Œéª¨æ¶å±
- [ ] æ”¹è¿›ç©ºçŠ¶æ€å¼•å¯¼
- [ ] ä¼˜åŒ–é”™è¯¯æç¤ºå’Œé‡è¯•æœºåˆ¶

**UXæ”¹è¿›ç¤ºä¾‹**ï¼š
```swift
// ç»Ÿä¸€çš„åŠ è½½çŠ¶æ€
struct LoadingState: View {
    var body: some View {
        VStack(spacing: 16) {
            ProgressView()
                .scaleEffect(1.2)
            Text("æ­£åœ¨åŠ è½½...")
                .font(.subheadline)
                .foregroundColor(.secondary)
        }
    }
}

// æ”¹è¿›çš„ç©ºçŠ¶æ€
struct EmptyStateView: View {
    let title: String
    let message: String
    let actionTitle: String?
    let action: (() -> Void)?
    
    var body: some View {
        VStack(spacing: 24) {
            Image(systemName: "tray")
                .font(.system(size: 48))
                .foregroundColor(.secondary)
            
            VStack(spacing: 8) {
                Text(title)
                    .font(.headline)
                Text(message)
                    .font(.subheadline)
                    .foregroundColor(.secondary)
                    .multilineTextAlignment(.center)
            }
            
            if let actionTitle = actionTitle, let action = action {
                Button(actionTitle, action: action)
                    .buttonStyle(.borderedProminent)
            }
        }
        .padding()
    }
}
```

**éªŒè¯æ ‡å‡†**ï¼š
- ç”¨æˆ·ä»»åŠ¡å®Œæˆæ—¶é—´å‡å°‘
- ç”¨æˆ·é”™è¯¯æ“ä½œå‡å°‘
- ç•Œé¢ç›´è§‚æ˜“æ‡‚

### ç¬¬äº”é˜¶æ®µï¼šå®ç°ç»¼åˆæµ‹è¯•ï¼ˆ3-4å¤©ï¼‰

#### 5.1 å•å…ƒæµ‹è¯•å®ç°
**ç›®æ ‡**ï¼šä¸ºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘æä¾›å…¨é¢æµ‹è¯•è¦†ç›–

**æµ‹è¯•è¦†ç›–è®¡åˆ’**ï¼š
- **Serviceå±‚**ï¼š~30ä¸ªæµ‹è¯•ç”¨ä¾‹
- **Repositoryå±‚**ï¼š~20ä¸ªæµ‹è¯•ç”¨ä¾‹
- **ViewModelå±‚**ï¼š~15ä¸ªæµ‹è¯•ç”¨ä¾‹
- **Cache Manager**ï¼š~25ä¸ªæµ‹è¯•ç”¨ä¾‹

**æ ¸å¿ƒæµ‹è¯•ç”¨ä¾‹ç¤ºä¾‹**ï¼š
```swift
class CustomerOutOfStockServiceTests: XCTestCase {
    var service: CustomerOutOfStockDataService!
    var mockRepository: MockCustomerOutOfStockRepository!
    
    override func setUp() {
        super.setUp()
        mockRepository = MockCustomerOutOfStockRepository()
        service = CustomerOutOfStockDataServiceImpl(repository: mockRepository)
    }
    
    func testFetchRecordsWithValidCriteria() async throws {
        // Given
        let criteria = OutOfStockFilterCriteria(date: Date())
        let expectedRecords = [CustomerOutOfStock.mock()]
        mockRepository.fetchResult = .success(PaginationResult(
            items: expectedRecords, 
            hasMoreData: false,
            nextCursor: nil,
            totalCount: 1
        ))
        
        // When
        let result = try await service.fetchRecords(criteria)
        
        // Then
        XCTAssertEqual(result.items.count, 1)
        XCTAssertEqual(result.items.first?.id, expectedRecords.first?.id)
        XCTAssertEqual(mockRepository.lastFetchCriteria, criteria)
    }
    
    func testCreateRecordWithValidData() async throws {
        // Given
        let record = CustomerOutOfStock.mock()
        mockRepository.createResult = .success(record)
        
        // When
        let createdRecord = try await service.createRecord(record)
        
        // Then
        XCTAssertEqual(createdRecord.id, record.id)
        XCTAssertEqual(mockRepository.lastCreatedRecord, record)
    }
}

class OutOfStockCacheManagerTests: XCTestCase {
    var cacheManager: OutOfStockCacheManager!
    
    func testCacheHitForValidKey() async {
        // Given
        let key = OutOfStockCacheKey(date: Date(), filterHash: "hash", page: 1, pageSize: 50)
        let data = CachedOutOfStockPage.mock()
        await cacheManager.setCachedData(data, for: key)
        
        // When
        let cachedData = await cacheManager.getCachedData(key)
        
        // Then
        XCTAssertNotNil(cachedData)
        XCTAssertEqual(cachedData?.items.count, data.items.count)
    }
    
    func testCacheEvictionUnderMemoryPressure() async {
        // Given: Fill cache to capacity
        for i in 0..<100 {
            let key = OutOfStockCacheKey(date: Date(), filterHash: "hash\(i)", page: 1, pageSize: 50)
            await cacheManager.setCachedData(CachedOutOfStockPage.mock(), for: key)
        }
        
        // When: Trigger memory pressure
        await cacheManager.handleMemoryPressure()
        
        // Then: Cache should be reduced
        let stats = await cacheManager.getCacheStatistics()
        XCTAssertLessThan(stats.memoryItemCount, 100)
    }
}
```

#### 5.2 é›†æˆæµ‹è¯•å®ç°
**ç›®æ ‡**ï¼šéªŒè¯ç»„ä»¶é—´äº¤äº’å’Œç«¯åˆ°ç«¯æµç¨‹

**é›†æˆæµ‹è¯•åœºæ™¯**ï¼š
```swift
class CustomerOutOfStockIntegrationTests: XCTestCase {
    func testCompleteOutOfStockWorkflow() async throws {
        // Given: å®Œæ•´çš„ä¾èµ–è®¾ç½®
        let dependencies = await createTestDependencies()
        let viewModel = CustomerOutOfStockViewModel(dependencies: dependencies)
        
        // When: æ‰§è¡Œå®Œæ•´æµç¨‹
        await viewModel.loadInitialData()
        await viewModel.applyFilter(.status(.pending))
        let item = viewModel.items.first!
        await viewModel.updateItemStatus(item, to: .resolved)
        
        // Then: éªŒè¯çŠ¶æ€å˜åŒ–
        XCTAssertTrue(viewModel.items.contains { $0.status == .resolved })
        
        // And: éªŒè¯å®¡è®¡æ—¥å¿—
        let auditEvents = await dependencies.auditService.getEvents()
        XCTAssertTrue(auditEvents.contains { $0.action == "update_status" })
    }
    
    func testCacheIntegrationWithDataService() async throws {
        // Given
        let service = CustomerOutOfStockDataServiceImpl(
            repository: LocalCustomerOutOfStockRepository(),
            cacheManager: OutOfStockCacheManager()
        )
        
        let criteria = OutOfStockFilterCriteria(date: Date())
        
        // When: First load (cache miss)
        let firstResult = try await service.fetchRecords(criteria)
        let firstLoadTime = await measureLoadTime {
            _ = try await service.fetchRecords(criteria)
        }
        
        // When: Second load (cache hit)  
        let secondLoadTime = await measureLoadTime {
            _ = try await service.fetchRecords(criteria)
        }
        
        // Then: Cache hit should be faster
        XCTAssertLessThan(secondLoadTime, firstLoadTime * 0.5)
    }
}
```

#### 5.3 æ€§èƒ½æµ‹è¯•å®ç°
**ç›®æ ‡**ï¼šç¡®ä¿æ€§èƒ½æŒ‡æ ‡ç¬¦åˆè¦æ±‚

**æ€§èƒ½æµ‹è¯•ç”¨ä¾‹**ï¼š
```swift
class CustomerOutOfStockPerformanceTests: XCTestCase {
    func testPaginationPerformance() {
        measure {
            let expectation = XCTestExpectation(description: "Load page")
            
            Task {
                let service = CustomerOutOfStockDataServiceImpl()
                let criteria = OutOfStockFilterCriteria(date: Date())
                
                let startTime = CFAbsoluteTimeGetCurrent()
                _ = try await service.fetchRecords(criteria)
                let loadTime = CFAbsoluteTimeGetCurrent() - startTime
                
                XCTAssertLessThan(loadTime, 0.5) // 500ms target
                expectation.fulfill()
            }
            
            wait(for: [expectation], timeout: 5.0)
        }
    }
    
    func testMemoryUsageDuringLargeDataLoad() async throws {
        let initialMemory = getMemoryUsage()
        
        // Load large dataset
        let service = CustomerOutOfStockDataServiceImpl()
        var items: [CustomerOutOfStock] = []
        
        for page in 0..<10 {
            let criteria = OutOfStockFilterCriteria(date: Date(), page: page)
            let result = try await service.fetchRecords(criteria)
            items.append(contentsOf: result.items)
        }
        
        let finalMemory = getMemoryUsage()
        let memoryIncrease = finalMemory - initialMemory
        
        // Memory increase should be reasonable
        XCTAssertLessThan(memoryIncrease, 50 * 1024 * 1024) // 50MB limit
    }
}
```

#### 5.4 UIæµ‹è¯•å®ç°
**ç›®æ ‡**ï¼šéªŒè¯ç”¨æˆ·ç•Œé¢äº¤äº’å’Œæµç¨‹

**UIæµ‹è¯•åœºæ™¯**ï¼š
```swift
class CustomerOutOfStockUITests: XCTestCase {
    func testFilterAndSearchWorkflow() {
        let app = XCUIApplication()
        app.launch()
        
        // Navigate to out-of-stock list
        app.navigationBars["Dashboard"].buttons["å®¢æˆ·ç¼ºè´§"].tap()
        
        // Test search functionality
        let searchBar = app.searchFields["æœç´¢å®¢æˆ·ç¼ºè´§è®°å½•"]
        searchBar.tap()
        searchBar.typeText("æµ‹è¯•å®¢æˆ·")
        
        // Wait for search results
        let firstResult = app.cells.firstMatch
        XCTAssertTrue(firstResult.waitForExistence(timeout: 5))
        
        // Test filter functionality
        app.buttons["ç­›é€‰"].tap()
        app.buttons["å¾…å¤„ç†"].tap()
        app.buttons["åº”ç”¨ç­›é€‰"].tap()
        
        // Verify filtered results
        XCTAssertTrue(app.staticTexts["å¾…å¤„ç†"].exists)
        
        // Test item selection and editing
        firstResult.tap()
        app.buttons["ç¼–è¾‘"].tap()
        
        let statusPicker = app.pickers["çŠ¶æ€"]
        statusPicker.tap()
        app.pickerWheels.firstMatch.adjust(toPickerWheelValue: "å·²è§£å†³")
        
        app.buttons["ä¿å­˜"].tap()
        
        // Verify update
        XCTAssertTrue(app.staticTexts["å·²è§£å†³"].waitForExistence(timeout: 3))
    }
    
    func testAccessibilityCompliance() {
        let app = XCUIApplication()
        app.launch()
        
        // Enable VoiceOver simulation
        app.accessibilityActivate()
        
        // Test VoiceOver navigation
        let elements = app.descendants(matching: .any).allElementsBoundByAccessibilityElement
        
        for element in elements {
            if element.isHittable {
                // Verify accessibility label exists
                XCTAssertFalse(element.label.isEmpty, "Element \(element) missing accessibility label")
                
                // Verify minimum touch target size
                let frame = element.frame
                XCTAssertGreaterThanOrEqual(frame.width, 44, "Touch target too small")
                XCTAssertGreaterThanOrEqual(frame.height, 44, "Touch target too small")
            }
        }
    }
}
```

---

## ğŸ“Š é¢„æœŸæˆæœæŒ‡æ ‡

### åˆè§„æ€§æå‡
- âœ… **æ¶æ„åˆè§„æ€§**ï¼š100% ç¬¦åˆCLAUDE.mdåˆ†å±‚æ¶æ„è¦æ±‚
- âœ… **å®‰å…¨åˆè§„æ€§**ï¼šä¿®å¤æ‰€æœ‰Criticalå’ŒHighçº§åˆ«å®‰å…¨æ¼æ´
- âœ… **å¯è®¿é—®æ€§åˆè§„**ï¼šç¬¦åˆApple HIGå’ŒWCAG AAæ ‡å‡†
- âœ… **ä»£ç è´¨é‡**ï¼šå•ä¸€èŒè´£åŸåˆ™ï¼Œå¯æµ‹è¯•æ€§æ˜¾è‘—æå‡

### æ€§èƒ½æ”¹å–„æŒ‡æ ‡
- âœ… **ä¸»çº¿ç¨‹å“åº”æ€§**ï¼šUIå“åº”æ—¶é—´æå‡50%
- âœ… **å†…å­˜ä¼˜åŒ–**ï¼šå†…å­˜ä½¿ç”¨å‡å°‘30%ï¼Œæ— å†…å­˜æ³„æ¼
- âœ… **ç¼“å­˜æ•ˆç‡**ï¼šç¼“å­˜å‘½ä¸­ç‡æå‡åˆ°80%ä»¥ä¸Š
- âœ… **åŠ è½½æ€§èƒ½**ï¼šåˆå§‹åŠ è½½æ—¶é—´<500msï¼Œåˆ†é¡µåŠ è½½<300ms

### è´¨é‡æå‡æŒ‡æ ‡
- âœ… **æµ‹è¯•è¦†ç›–ç‡**ï¼šæ•´ä½“è¾¾åˆ°70%ï¼Œæ ¸å¿ƒæœåŠ¡è¾¾åˆ°85%
- âœ… **ä»£ç è´¨é‡**ï¼šCyclomatic Complexityé™ä½ï¼Œå¯ç»´æŠ¤æ€§æŒ‡æ•°æå‡
- âœ… **é”™è¯¯ç‡**ï¼šè¿è¡Œæ—¶é”™è¯¯å‡å°‘90%
- âœ… **ç”¨æˆ·ä½“éªŒ**ï¼šä»»åŠ¡å®Œæˆæ—¶é—´å‡å°‘ï¼Œç”¨æˆ·æ»¡æ„åº¦æå‡

---

## ğŸš€ å®æ–½æ—¶é—´çº¿

### ç¬¬ä¸€å‘¨ï¼ˆå®‰å…¨ä¸æ¶æ„ï¼‰
- **ç¬¬1-2å¤©**ï¼šç´§æ€¥å®‰å…¨ä¿®å¤
- **ç¬¬3-5å¤©**ï¼šæ¶æ„é‡æ„

### ç¬¬äºŒå‘¨ï¼ˆæ€§èƒ½ä¸UIï¼‰  
- **ç¬¬1-3å¤©**ï¼šæ€§èƒ½ä¼˜åŒ–
- **ç¬¬4-5å¤©**ï¼šUI/UXåˆè§„ä¿®å¤

### ç¬¬ä¸‰å‘¨ï¼ˆæµ‹è¯•ä¸éªŒè¯ï¼‰
- **ç¬¬1-4å¤©**ï¼šå®ç°ç»¼åˆæµ‹è¯•
- **ç¬¬5å¤©**ï¼šæœ€ç»ˆéªŒè¯å’Œæ–‡æ¡£æ›´æ–°

---

## âš ï¸ é£é™©è¯„ä¼°ä¸ç¼“è§£

### é«˜é£é™©é¡¹
- **æ¶æ„é‡æ„å¤æ‚æ€§**ï¼šåˆ†é˜¶æ®µå®æ–½ï¼Œä¿æŒå‘åå…¼å®¹
- **æ€§èƒ½å›å½’**ï¼šæ¯æ­¥éª¤åè¿›è¡Œæ€§èƒ½æµ‹è¯•éªŒè¯
- **åŠŸèƒ½ç ´å**ï¼šå…¨é¢å›å½’æµ‹è¯•ï¼Œä¿æŒåŠŸèƒ½å®Œæ•´æ€§

### ä¸­ç­‰é£é™©é¡¹
- **æ—¶é—´ä¼°ç®—åå·®**ï¼šé¢„ç•™20%ç¼“å†²æ—¶é—´
- **ä¾èµ–å†²çª**ï¼šæå‰è¯†åˆ«å’Œè§£å†³ä¾èµ–é—®é¢˜
- **å›¢é˜Ÿåè°ƒ**ï¼šæ˜ç¡®è´£ä»»åˆ†å·¥å’Œæ²Ÿé€šæœºåˆ¶

### ç¼“è§£ç­–ç•¥
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šæ¯ä¸ªé˜¶æ®µåˆ›å»ºåˆ†æ”¯ï¼Œä¾¿äºå›æ»š
- **æ¸è¿›å¼éƒ¨ç½²**ï¼šå…ˆåœ¨æµ‹è¯•ç¯å¢ƒå®Œå…¨éªŒè¯
- **å›æ»šè®¡åˆ’**ï¼šå‡†å¤‡å¿«é€Ÿå›æ»šåˆ°ç¨³å®šç‰ˆæœ¬çš„æ–¹æ¡ˆ

---

## ğŸ“ éªŒè¯æ£€æŸ¥æ¸…å•

### æ¯é˜¶æ®µå®Œæˆæ£€æŸ¥
- [ ] ä»£ç ç¼–è¯‘æ— è­¦å‘Šå’Œé”™è¯¯
- [ ] æ¨¡æ‹Ÿå™¨åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] ç›¸å…³å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æŒ‡æ ‡æœªå›é€€
- [ ] å®‰å…¨æ‰«æé€šè¿‡

### æœ€ç»ˆå‘å¸ƒæ£€æŸ¥
- [ ] å…¨éƒ¨æµ‹è¯•å¥—ä»¶é€šè¿‡
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•è¾¾æ ‡
- [ ] å®‰å…¨å®¡è®¡é€šè¿‡
- [ ] å¯è®¿é—®æ€§æµ‹è¯•é€šè¿‡
- [ ] ä»£ç å®¡æŸ¥å®Œæˆ

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [CLAUDE.md - iOSå·¥ç¨‹è§„èŒƒ](./CLAUDE.md)
- [Apple Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines/)
- [iOS Security Guide](https://support.apple.com/guide/security/welcome/web)
- [Swift Testing Best Practices](https://developer.apple.com/documentation/xctest)
- [SwiftUI Performance Tips](https://developer.apple.com/documentation/swiftui/improving-the-performance-of-your-swiftui-app)

---

*æœ¬æŠ¥å‘Šç”±å¤šä¸ªä¸“ä¸šAgentåä½œå®Œæˆï¼Œæ¶µç›–æ¶æ„ã€å®‰å…¨ã€ä»£ç è´¨é‡ã€UI/UXå’Œæµ‹è¯•ç­‰å„ä¸ªæ–¹é¢çš„æ·±åº¦åˆ†æã€‚å»ºè®®æŒ‰è®¡åˆ’åˆ†é˜¶æ®µå®æ–½ï¼Œç¡®ä¿é«˜è´¨é‡äº¤ä»˜ã€‚*